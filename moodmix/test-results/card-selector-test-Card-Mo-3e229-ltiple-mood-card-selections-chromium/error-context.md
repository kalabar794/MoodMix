# Test info

- Name: Card Mood Selector Tests >> should test multiple mood card selections
- Location: /Users/jonathonc/Auto1111/claude/MoodMix/moodmix/tests/card-selector-test.spec.ts:88:7

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toBeVisible()

Locator: locator('button:has-text("Calm")')
Expected: visible
Received: <element(s) not found>
Call log:
  - expect.toBeVisible with timeout 5000ms
  - waiting for locator('button:has-text("Calm")')

    at /Users/jonathonc/Auto1111/claude/MoodMix/moodmix/tests/card-selector-test.spec.ts:108:30
```

# Page snapshot

```yaml
- main:
  - navigation:
    - text: LandingAI
    - link "Saved Pages":
      - /url: /saved
    - button "Get Started Free"
  - text: AI-Powered • Lightning Fast • No Coding Required
  - heading "Beautiful Landing Pages Built by AI" [level=1]
  - paragraph: Transform your business ideas into stunning, high-converting landing pages in minutes. Our AI analyzes your business and creates professional designs with compelling copy and perfect images.
  - button "Create Your Landing Page →"
  - button "View Examples ↓"
  - text: 300% Higher Conversion Rate 2 Min Average Generation Time 10K+ Landing Pages Created
  - heading "See What AI Can Create For You" [level=2]
  - paragraph: Every landing page is unique, professional, and optimized for conversions. Click through these real examples to see the quality.
  - heading "Choose an Example" [level=3]
  - text: Technology
  - heading "TechFlow Solutions" [level=3]
  - paragraph: AI-powered SaaS platform for workflow automation
  - text: Automate Your Workflow, Amplify Your Results TechFlow's AI-powered automation platform helps teams eliminate repetitive tasks and focus on what matters most. Increase productivity by 300% with intelligent workflow optimization.
  - img "Sarah Chen"
  - img "Marcus Rodriguez"
  - text: Click to preview Health & Wellness
  - heading "EcoGreen Wellness" [level=3]
  - paragraph: Sustainable health products and eco-friendly lifestyle
  - text: Pure Wellness, Planet-Friendly Promise Discover organic supplements, eco-friendly beauty products, and sustainable wellness solutions that nourish your body while protecting our planet. 100% natural, zero compromise.
  - img "Jennifer Martinez"
  - img "David Kim"
  - text: Click to preview Finance
  - heading "FinanceForward" [level=3]
  - paragraph: Modern financial planning and investment services
  - text: Your Financial Future, Simplified Expert financial planning meets cutting-edge technology. Get personalized investment strategies, retirement planning, and wealth management from certified advisors who put your goals first.
  - img "Robert Thompson"
  - img "Lisa Wang"
  - text: Click to preview Creative
  - heading "CreativeStudio Pro" [level=3]
  - paragraph: Design agency specializing in brand identity
  - text: Brands That Break Through the Noise We create bold, memorable brand identities that connect with your audience and drive business growth. From startups to Fortune 500s, we turn vision into visual impact.
  - img "Alexandra Foster"
  - img "Michael Chen"
  - text: Click to preview Food & Beverage
  - heading "FoodieDelight" [level=3]
  - paragraph: Gourmet meal delivery and cooking experiences
  - text: Restaurant-Quality Meals, Delivered to Your Door Experience chef-crafted gourmet meals made with premium ingredients and delivered fresh daily. From date nights to family dinners, we bring the restaurant experience home.
  - img "Emma Rodriguez"
  - img "Daniel Park"
  - text: Click to preview Fitness
  - heading "FitnessPro Elite" [level=3]
  - paragraph: Personal training and fitness coaching platform
  - text: Transform Your Body, Transform Your Life Get personalized training plans, nutrition coaching, and 24/7 support from certified personal trainers. Join thousands who've achieved their fitness goals with our proven system.
  - img "Jessica Taylor"
  - img "Mark Williams"
  - text: Click to preview
  - heading "Live Preview" [level=3]
  - text: https://techflow.ai
  - heading "Automate Your Workflow, Amplify Your Results" [level=1]
  - paragraph: TechFlow's AI-powered automation platform helps teams eliminate repetitive tasks and focus on what matters most. Increase productivity by 300% with intelligent workflow optimization.
  - button "Start Free 14-Day Trial →"
  - heading "Why Choose TechFlow Solutions?" [level=2]
  - text: 🤖
  - heading "Smart Automation" [level=3]
  - paragraph: AI learns your processes and automatically optimizes workflows to save hours of manual work every day.
  - text: 📊
  - heading "Real-time Analytics" [level=3]
  - paragraph: Get instant insights into team performance with beautiful dashboards and actionable metrics.
  - text: 🔗
  - heading "Seamless Integration" [level=3]
  - paragraph: Connect with 100+ tools including Slack, Salesforce, and Google Workspace in just one click.
  - heading "Built for Modern Teams" [level=2]
  - paragraph: TechFlow was created by engineers who understood the pain of repetitive work. Our AI-first approach to workflow automation has helped over 10,000 teams reclaim their time and achieve breakthrough productivity. From startups to Fortune 500 companies, teams trust TechFlow to power their most critical processes.
  - button "Learn More →"
  - heading "What Our Clients Say" [level=2]
  - text: ★ ★ ★ ★ ★
  - paragraph: "\"TechFlow reduced our manual processing time by 80%. The AI suggestions are incredibly accurate and our team loves the intuitive interface.\""
  - img "Sarah Chen"
  - text: Sarah Chen VP of Operations, InnovateCorp ★ ★ ★ ★ ★
  - paragraph: "\"Implementation was seamless and ROI was immediate. TechFlow has become essential to our operations.\""
  - img "Marcus Rodriguez"
  - text: Marcus Rodriguez CTO, DataScale
  - heading "Ready to Transform Your Workflow?" [level=2]
  - paragraph: Join 10,000+ teams using TechFlow to automate success
  - button "Start Your Free Trial →"
  - heading "TechFlow Solutions" [level=3]
  - paragraph: Professional landing page by AI
  - button "Create Your Own Landing Page"
  - text: 🧠
  - heading "AI-Powered Copy" [level=3]
  - paragraph: Claude AI creates compelling, conversion-focused copy tailored to your business and audience.
  - text: 🎨
  - heading "Smart Design" [level=3]
  - paragraph: Automatically curated images and professional layouts that match your industry and brand.
  - text: ⚡
  - heading "Lightning Fast" [level=3]
  - paragraph: From business brief to complete landing page in under 2 minutes. No coding or design skills needed.
  - heading "Trusted by Growing Businesses" [level=3]
  - text: ★ ★ ★ ★ ★
  - paragraph: "\"Incredible results! Our conversion rate increased by 250% with the AI-generated landing page.\""
  - text: Sarah Chen Founder, TechStartup ★ ★ ★ ★ ★
  - paragraph: "\"The AI understood our business perfectly. The copy and design were spot-on from the first try.\""
  - text: Mike Rodriguez Marketing Director, GrowthCo ★ ★ ★ ★ ★
  - paragraph: "\"Saved us weeks of work and thousands in design costs. The quality is amazing!\""
  - text: Emma Thompson CEO, DigitalAgency
  - heading "Ready to Create Your Landing Page?" [level=2]
  - paragraph: Join thousands of businesses using AI to create high-converting landing pages
  - button "Get Started Free - 2 Minutes ⏱️"
- alert
- button "Open Next.js Dev Tools":
  - img
```

# Test source

```ts
   8 |     // Check for the new card selector header
   9 |     const header = page.locator('text="Choose Your Vibe"');
   10 |     await expect(header).toBeVisible();
   11 |     
   12 |     // Check for mood cards
   13 |     const moodCards = page.locator('button:has-text("Happy"), button:has-text("Calm"), button:has-text("Energetic")');
   14 |     await expect(moodCards.first()).toBeVisible();
   15 |     
   16 |     // Count total mood cards
   17 |     const cardCount = await page.locator('button').filter({ hasText: /Happy|Calm|Energetic|Romantic|Focused|Chill|Melancholy|Excited|Dreamy/ }).count();
   18 |     expect(cardCount).toBe(9);
   19 |     
   20 |     console.log(`✅ Found ${cardCount} mood cards`);
   21 |     
   22 |     await page.screenshot({ path: 'test-results/card-selector-loaded.png', fullPage: true });
   23 |   });
   24 |
   25 |   test('should handle card click and trigger music search', async ({ page }) => {
   26 |     const apiCalls: any[] = [];
   27 |     
   28 |     // Monitor API calls
   29 |     page.on('request', request => {
   30 |       if (request.url().includes('/api/mood-to-music')) {
   31 |         apiCalls.push({
   32 |           url: request.url(),
   33 |           method: request.method(),
   34 |           postData: request.postData()
   35 |         });
   36 |         console.log(`✅ API Request: ${request.method()} ${request.url()}`);
   37 |       }
   38 |     });
   39 |
   40 |     await page.goto('http://localhost:3002');
   41 |     await page.waitForLoadState('networkidle');
   42 |
   43 |     // Click on a specific mood card
   44 |     const happyCard = page.locator('button:has-text("Happy")');
   45 |     await expect(happyCard).toBeVisible();
   46 |     
   47 |     await page.screenshot({ path: 'test-results/before-card-click.png', fullPage: true });
   48 |     
   49 |     // Click the Happy card
   50 |     await happyCard.click();
   51 |     
   52 |     // Wait for API call and transition
   53 |     await page.waitForTimeout(5000);
   54 |     
   55 |     await page.screenshot({ path: 'test-results/after-card-click.png', fullPage: true });
   56 |     
   57 |     // Verify API call was made
   58 |     expect(apiCalls.length).toBeGreaterThan(0);
   59 |     console.log(`✅ ${apiCalls.length} API calls made`);
   60 |     
   61 |     if (apiCalls.length > 0) {
   62 |       const moodData = JSON.parse(apiCalls[0].postData || '{}');
   63 |       expect(moodData.primary).toBe('happy');
   64 |       expect(moodData.intensity).toBe(75);
   65 |       expect(moodData.color).toBeDefined();
   66 |       console.log(`✅ Mood selected: ${moodData.primary} at ${moodData.intensity}% intensity`);
   67 |     }
   68 |     
   69 |     // Check if we transitioned to results view
   70 |     const resultsIndicators = [
   71 |       page.locator('text="Current Mood"').first(),
   72 |       page.locator('text="Change Mood"'),
   73 |       page.locator('text="Your Perfect Soundtrack"')
   74 |     ];
   75 |     
   76 |     let transitioned = false;
   77 |     for (const indicator of resultsIndicators) {
   78 |       if (await indicator.isVisible()) {
   79 |         transitioned = true;
   80 |         break;
   81 |       }
   82 |     }
   83 |     
   84 |     expect(transitioned).toBeTruthy();
   85 |     console.log('✅ Successfully transitioned to results view');
   86 |   });
   87 |
   88 |   test('should test multiple mood card selections', async ({ page }) => {
   89 |     await page.goto('http://localhost:3002');
   90 |     await page.waitForLoadState('networkidle');
   91 |
   92 |     const moodTests = [
   93 |       { name: 'Calm', expectedMood: 'calm' },
   94 |       { name: 'Energetic', expectedMood: 'energetic' },
   95 |       { name: 'Romantic', expectedMood: 'romantic' }
   96 |     ];
   97 |
   98 |     for (const moodTest of moodTests) {
   99 |       // Go back to mood selection if needed
  100 |       const changeMoodButton = page.locator('button:has-text("Change Mood")');
  101 |       if (await changeMoodButton.isVisible()) {
  102 |         await changeMoodButton.click();
  103 |         await page.waitForTimeout(1000);
  104 |       }
  105 |
  106 |       // Click the mood card
  107 |       const moodCard = page.locator(`button:has-text("${moodTest.name}")`);
> 108 |       await expect(moodCard).toBeVisible();
      |                              ^ Error: Timed out 5000ms waiting for expect(locator).toBeVisible()
  109 |       
  110 |       await moodCard.click();
  111 |       await page.waitForTimeout(3000);
  112 |       
  113 |       // Verify transition occurred
  114 |       const currentMoodText = page.locator('text="Current Mood"').first();
  115 |       await expect(currentMoodText).toBeVisible({ timeout: 10000 });
  116 |       
  117 |       console.log(`✅ ${moodTest.name} mood selection successful`);
  118 |       
  119 |       await page.screenshot({ path: `test-results/mood-${moodTest.expectedMood}-selected.png`, fullPage: true });
  120 |     }
  121 |   });
  122 |
  123 |   test('should verify card animations and interactions', async ({ page }) => {
  124 |     await page.goto('http://localhost:3002');
  125 |     await page.waitForLoadState('networkidle');
  126 |
  127 |     // Test hover effects on cards
  128 |     const happyCard = page.locator('button:has-text("Happy")');
  129 |     await expect(happyCard).toBeVisible();
  130 |
  131 |     // Hover over the card
  132 |     await happyCard.hover();
  133 |     await page.waitForTimeout(500);
  134 |     await page.screenshot({ path: 'test-results/card-hover-effect.png' });
  135 |
  136 |     // Test multiple card hovers
  137 |     const cardNames = ['Calm', 'Energetic', 'Romantic'];
  138 |     for (const cardName of cardNames) {
  139 |       const card = page.locator(`button:has-text("${cardName}")`);
  140 |       await card.hover();
  141 |       await page.waitForTimeout(200);
  142 |     }
  143 |
  144 |     console.log('✅ Card hover effects working');
  145 |
  146 |     // Test card selection visual feedback
  147 |     await happyCard.click();
  148 |     
  149 |     // Look for selection indicators (loading, pulse effects, etc.)
  150 |     await page.waitForTimeout(1000);
  151 |     await page.screenshot({ path: 'test-results/card-selection-feedback.png' });
  152 |     
  153 |     console.log('✅ Card selection feedback working');
  154 |   });
  155 |
  156 |   test('should verify responsive design on different screen sizes', async ({ page }) => {
  157 |     // Test mobile size
  158 |     await page.setViewportSize({ width: 375, height: 667 });
  159 |     await page.goto('http://localhost:3002');
  160 |     await page.waitForLoadState('networkidle');
  161 |     
  162 |     await page.screenshot({ path: 'test-results/cards-mobile.png', fullPage: true });
  163 |     
  164 |     // Verify cards are still clickable on mobile
  165 |     const happyCard = page.locator('button:has-text("Happy")');
  166 |     await expect(happyCard).toBeVisible();
  167 |     
  168 |     // Test tablet size
  169 |     await page.setViewportSize({ width: 768, height: 1024 });
  170 |     await page.reload();
  171 |     await page.waitForLoadState('networkidle');
  172 |     
  173 |     await page.screenshot({ path: 'test-results/cards-tablet.png', fullPage: true });
  174 |     
  175 |     // Test desktop size
  176 |     await page.setViewportSize({ width: 1920, height: 1080 });
  177 |     await page.reload();
  178 |     await page.waitForLoadState('networkidle');
  179 |     
  180 |     await page.screenshot({ path: 'test-results/cards-desktop.png', fullPage: true });
  181 |     
  182 |     console.log('✅ Responsive design verified across screen sizes');
  183 |   });
  184 | });
```