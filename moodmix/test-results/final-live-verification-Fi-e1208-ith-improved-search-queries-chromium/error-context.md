# Test info

- Name: Final Live Deployment Verification >> should verify live deployment with improved search queries
- Location: /Users/jonathonc/Auto1111/claude/MoodMix/moodmix/tests/final-live-verification.spec.ts:4:7

# Error details

```
Error: locator.textContent: Test timeout of 30000ms exceeded.
Call log:
  - waiting for locator('.error, [class*="error"]')

    at /Users/jonathonc/Auto1111/claude/MoodMix/moodmix/tests/final-live-verification.spec.ts:117:75
```

# Page snapshot

```yaml
- main:
  - img
  - heading "MoodMix" [level=1]
  - text: MoodMix
  - paragraph: Current Mood
  - paragraph: energetic
  - button "Change Mood"
  - button "Auto theme"
  - button "Show keyboard shortcuts"
  - text: Current Mood energetic Intensity 75% Tracks Found 20
  - heading "Your Perfect Soundtrack" [level=2]
  - paragraph: High-octane tracks to fuel your dynamic spirit
  - text: 20 tracks curated for you 1
  - 'img "Time Out: New Year’s Eve Party, Background Celebration Songs 2020, Soft Jazz Vintage Mood"'
  - heading "Funny Dance" [level=3]
  - paragraph: Dale Burbeck
  - paragraph: "Time Out: New Year’s Eve Party, Background Celebration Songs 2020, Soft Jazz Vintage Mood"
  - text: 3:44
  - button "—" [disabled]
  - button "Listen on Spotify":
    - img
  - link:
    - /url: https://open.spotify.com/track/4rP3zawo5v2JiLjXiVqA9V
    - img
  - text: "2"
  - 'img "Jazz Music for Kids Day Celebration: Fun Play with Family (Spend Positive Time with Your Child)"'
  - heading "Party for Kids (Dance and Fun)" [level=3]
  - paragraph: Smooth Jazz Family Collective
  - paragraph: "Jazz Music for Kids Day Celebration: Fun Play with Family (Spend Positive Time with Your Child)"
  - text: 3:22
  - button "—" [disabled]
  - button "Listen on Spotify":
    - img
  - link:
    - /url: https://open.spotify.com/track/4KkYz0PEAA2yy77E5AVX16
    - img
  - text: "3"
  - img "LGBT Disco! Pride Month Celebration With Funky Dance Music"
  - heading "Party All Night" [level=3]
  - paragraph: Gay Bar Club, Just Dancing, Summertime Jazz
  - paragraph: LGBT Disco! Pride Month Celebration With Funky Dance Music
  - text: 3:47
  - button "—" [disabled]
  - button "Listen on Spotify":
    - img
  - link:
    - /url: https://open.spotify.com/track/3FfKfbfcDMEopvaA5tP1EL
    - img
  - text: "4"
  - 'img "Midnight Snowfall Celebration: Music for Welcoming the New Year"'
  - 'heading "Santa’s Dance Party: Fun Christmas Tunes to Get Everyone Moving" [level=3]'
  - paragraph: Drelliot
  - paragraph: "Midnight Snowfall Celebration: Music for Welcoming the New Year"
  - text: 3:57
  - button "—" [disabled]
  - button "Listen on Spotify":
    - img
  - link:
    - /url: https://open.spotify.com/track/5nOj9FTz6rVPNspzmthUUH
    - img
  - text: "5"
  - img "Retro Funky Edm Chill Dance Party Music"
  - heading "Centaur Celebration (Funky Chill Dance Beats)" [level=3]
  - paragraph: EDM Machine
  - paragraph: Retro Funky Edm Chill Dance Party Music
  - text: 3:48
  - button "—" [disabled]
  - button "Listen on Spotify":
    - img
  - link:
    - /url: https://open.spotify.com/track/72EAccSyUhBFJCNMAyfaOs
    - img
  - text: "6"
  - 'img "Wigwam Kids Party: Music Accompaniment for Fun and Games, Birthday Celebration (Children Between 5 to 8 years old), Vol. 1"'
  - heading "Little Shamanic Dance" [level=3]
  - paragraph: Child Care Specialists
  - paragraph: "Wigwam Kids Party: Music Accompaniment for Fun and Games, Birthday Celebration (Children Between 5 to 8 years old), Vol. 1"
  - text: 3:35
  - button "—" [disabled]
  - button "Listen on Spotify":
    - img
  - link:
    - /url: https://open.spotify.com/track/4HTxGsDQa9cQkD0FYYlev1
    - img
  - text: "7"
  - img "Popular (Music from the HBO Original Series)"
  - heading "Popular (with Playboi Carti & Madonna) - From The Idol Vol. 1 (Music from the HBO Original Series)" [level=3]
  - paragraph: The Weeknd, Playboi Carti, Madonna
  - paragraph: Popular (Music from the HBO Original Series)
  - text: 3:35
  - button "—" [disabled]
  - button "Listen on Spotify":
    - img
  - link:
    - /url: https://open.spotify.com/track/6WzRpISELf3YglGAh7TXcG
    - img
  - text: "8"
  - img "Dope Don't Sell Itself"
  - heading "Pop Music (feat. Moneybagg Yo & Beatking)" [level=3]
  - paragraph: 2 Chainz, Moneybagg Yo, BeatKing
  - paragraph: Dope Don't Sell Itself
  - text: 2:05
  - button "—" [disabled]
  - button "Listen on Spotify":
    - img
  - link:
    - /url: https://open.spotify.com/track/6vhdaXwxDmNYM8d4I383XJ
    - img
  - text: "9"
  - img "Pop Music"
  - heading "Pop Music (feat. Moneybagg Yo & Beatking)" [level=3]
  - paragraph: 2 Chainz, Moneybagg Yo, BeatKing
  - paragraph: Pop Music
  - text: 2:05
  - button "—" [disabled]
  - button "Listen on Spotify":
    - img
  - link:
    - /url: https://open.spotify.com/track/7562OP1Zx84xqrO5ECYour
    - img
  - text: "10"
  - img "POP MUSIC"
  - heading "SIREN" [level=3]
  - paragraph: Lilyisthatyou
  - paragraph: POP MUSIC
  - text: 2:16
  - button "—" [disabled]
  - button "Listen on Spotify":
    - img
  - link:
    - /url: https://open.spotify.com/track/1baqAtYnkpNzHAYwqibv0x
    - img
  - text: "11"
  - img "POP MUSIC"
  - heading "RELAX AFTER WORK WITH A DRINK" [level=3]
  - paragraph: Lilyisthatyou
  - paragraph: POP MUSIC
  - text: 1:57
  - button "—" [disabled]
  - button "Listen on Spotify":
    - img
  - link:
    - /url: https://open.spotify.com/track/1zoJ8Ixu6w7uWdEFToXr6c
    - img
  - text: "12"
  - img "Haha"
  - heading "Pop Music" [level=3]
  - paragraph: Lilac Boy
  - paragraph: Haha
  - text: 2:27
  - button "—" [disabled]
  - button "Listen on Spotify":
    - img
  - link:
    - /url: https://open.spotify.com/track/64mWHo1y0K4LL2LJJvVPSI
    - img
  - text: "13"
  - img "POP MUSIC"
  - heading "DANCE" [level=3]
  - paragraph: Lilyisthatyou
  - paragraph: POP MUSIC
  - text: 3:14
  - button "—" [disabled]
  - button "Listen on Spotify":
    - img
  - link:
    - /url: https://open.spotify.com/track/06B93ufTCpb6VWEiqgcVne
    - img
  - text: "14"
  - img "You're Just Like Pop Music"
  - heading "You're Just Like Pop Music" [level=3]
  - paragraph: YonKaGor
  - paragraph: You're Just Like Pop Music
  - text: 3:57
  - button "—" [disabled]
  - button "Listen on Spotify":
    - img
  - link:
    - /url: https://open.spotify.com/track/0UYnMDFZuXUpsiWGMq1EVk
    - img
  - text: "15"
  - img "POP MUSIC"
  - heading "GRINDING MY TEETH" [level=3]
  - paragraph: Lilyisthatyou
  - paragraph: POP MUSIC
  - text: 2:17
  - button "—" [disabled]
  - button "Listen on Spotify":
    - img
  - link:
    - /url: https://open.spotify.com/track/6amkSgnq8S1p7yruuPuADi
    - img
  - text: "16"
  - img "No Lyrics SFW Pop Instrumentals"
  - heading "Pop Music 2024" [level=3]
  - paragraph: Clean Pop Music, Instrumental Pop Music, Pop Songs 2023
  - paragraph: No Lyrics SFW Pop Instrumentals
  - text: 2:05
  - button "—" [disabled]
  - button "Listen on Spotify":
    - img
  - link:
    - /url: https://open.spotify.com/track/42GbsW1QgJu1AA68SKSCOA
    - img
  - text: "17"
  - img "POP MUSIC"
  - heading "SUPERSTAR" [level=3]
  - paragraph: Lilyisthatyou
  - paragraph: POP MUSIC
  - text: 2:52
  - button "—" [disabled]
  - button "Listen on Spotify":
    - img
  - link:
    - /url: https://open.spotify.com/track/5kfQF2FdBSlUrgik8cLYGR
    - img
  - text: "18"
  - img "Popular (Music from the HBO Original Series)"
  - heading "Popular (with Playboi Carti & Madonna) - From The Idol Vol. 1 (Music from the HBO Original Series)" [level=3]
  - paragraph: The Weeknd, Playboi Carti, Madonna
  - paragraph: Popular (Music from the HBO Original Series)
  - text: 3:35
  - button "—" [disabled]
  - button "Listen on Spotify":
    - img
  - link:
    - /url: https://open.spotify.com/track/67gUqq3wVAztSquOpNZ4Xs
    - img
  - text: "19"
  - img "Baby Sleep Music"
  - heading "Pop Goes the Weasel" [level=3]
  - paragraph: Lullaby Time
  - paragraph: Baby Sleep Music
  - text: 2:06
  - button "—" [disabled]
  - button "Listen on Spotify":
    - img
  - link:
    - /url: https://open.spotify.com/track/3kJtQ79tvaCFkCiXtpPfBw
    - img
  - text: "20"
  - img "pop music just hits"
  - heading "Lose Control" [level=3]
  - paragraph: Teddy Swims
  - paragraph: pop music just hits
  - text: 3:30
  - button "—" [disabled]
  - button "Listen on Spotify":
    - img
  - link:
    - /url: https://open.spotify.com/track/00ahQEcgGCvXEujKtLUcZJ
    - img
  - img
  - text: Powered by Spotify
  - paragraph: Powered by Spotify • Made for music lovers
- alert
```

# Test source

```ts
   17 |       
   18 |       console.log('Spotify Search Test Status:', spotifyResponse.status());
   19 |       console.log('Spotify Search Test Response:', spotifyBody.substring(0, 300));
   20 |       
   21 |       if (spotifyResponse.status() === 200) {
   22 |         const spotifyData = JSON.parse(spotifyBody);
   23 |         console.log('Direct search tracks found:', spotifyData.tracks?.length || 0);
   24 |       }
   25 |     } catch (error) {
   26 |       console.log('Spotify Search Test Error:', error);
   27 |     }
   28 |     
   29 |     // Test mood-to-music with energetic mood
   30 |     console.log('\n=== TESTING ENERGETIC MOOD WITH NEW QUERIES ===');
   31 |     try {
   32 |       const energeticResponse = await page.request.post('https://mood-mix-theta.vercel.app/api/mood-to-music', {
   33 |         headers: {
   34 |           'Content-Type': 'application/json',
   35 |         },
   36 |         data: {
   37 |           primary: 'energetic',
   38 |           intensity: 75,
   39 |           color: '#ef4444',
   40 |           coordinates: { x: 0, y: 0 }
   41 |         }
   42 |       });
   43 |       
   44 |       const energeticBody = await energeticResponse.text();
   45 |       console.log('Energetic Mood API Status:', energeticResponse.status());
   46 |       
   47 |       if (energeticResponse.status() === 200) {
   48 |         const energeticData = JSON.parse(energeticBody);
   49 |         console.log('Energetic tracks found:', energeticData.tracks?.length || 0);
   50 |         console.log('Search params used:', JSON.stringify(energeticData.params, null, 2));
   51 |         
   52 |         if (energeticData.tracks?.length > 0) {
   53 |           console.log('Sample tracks:');
   54 |           energeticData.tracks.slice(0, 3).forEach((track: any, index: number) => {
   55 |             console.log(`  ${index + 1}. ${track.name} by ${track.artists[0].name} (Preview: ${track.preview_url ? 'Yes' : 'No'})`);
   56 |           });
   57 |         }
   58 |       } else {
   59 |         console.log('Error response:', energeticBody);
   60 |       }
   61 |     } catch (error) {
   62 |       console.log('Energetic Mood API Error:', error);
   63 |     }
   64 |     
   65 |     // Test different moods to see which ones work now
   66 |     const moodsToTest = [
   67 |       { name: 'serene', color: '#14b8a6', description: 'low energy' },
   68 |       { name: 'melancholic', color: '#64748b', description: 'sad' },
   69 |       { name: 'passionate', color: '#ec4899', description: 'high emotion' }
   70 |     ];
   71 |     
   72 |     console.log('\n=== TESTING OTHER MOODS ===');
   73 |     for (const mood of moodsToTest) {
   74 |       try {
   75 |         const moodResponse = await page.request.post('https://mood-mix-theta.vercel.app/api/mood-to-music', {
   76 |           headers: {
   77 |             'Content-Type': 'application/json',
   78 |           },
   79 |           data: {
   80 |             primary: mood.name,
   81 |             intensity: 60,
   82 |             color: mood.color,
   83 |             coordinates: { x: 0, y: 0 }
   84 |           }
   85 |         });
   86 |         
   87 |         if (moodResponse.status() === 200) {
   88 |           const moodData = await moodResponse.json();
   89 |           console.log(`${mood.name.toUpperCase()} (${mood.description}): ${moodData.tracks?.length || 0} tracks found`);
   90 |         } else {
   91 |           console.log(`${mood.name.toUpperCase()}: Error ${moodResponse.status()}`);
   92 |         }
   93 |       } catch (error) {
   94 |         console.log(`${mood.name.toUpperCase()}: Error -`, error);
   95 |       }
   96 |     }
   97 |     
   98 |     // Test the UI by actually clicking on Energetic
   99 |     console.log('\n=== TESTING UI INTERACTION ===');
  100 |     
  101 |     // Find and click the Energetic button
  102 |     const energeticButton = page.locator('button:has-text("Energetic")').first();
  103 |     if (await energeticButton.count() > 0) {
  104 |       await energeticButton.click();
  105 |       
  106 |       // Wait for the API call and UI update
  107 |       await page.waitForTimeout(5000);
  108 |       
  109 |       // Check if any music results appeared
  110 |       const resultsVisible = await page.locator('[data-testid="music-results"], .track, .song, [class*="music"]').count();
  111 |       console.log('Music results visible in UI:', resultsVisible);
  112 |       
  113 |       // Take a screenshot
  114 |       await page.screenshot({ path: 'test-results/final-live-verification.png', fullPage: true });
  115 |       
  116 |       // Check for error messages
> 117 |       const errorMessage = await page.locator('.error, [class*="error"]').textContent();
      |                                                                           ^ Error: locator.textContent: Test timeout of 30000ms exceeded.
  118 |       if (errorMessage) {
  119 |         console.log('Error message in UI:', errorMessage);
  120 |       }
  121 |     } else {
  122 |       console.log('Could not find Energetic button');
  123 |     }
  124 |   });
  125 | });
```